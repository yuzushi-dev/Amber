# =============================================================================
# Hybrid GraphRAG System - Application Configuration
# =============================================================================
# This file contains default configuration values.
# Environment variables take precedence over these defaults.
# =============================================================================

# Application
app:
  name: "Amber"
  version: "0.1.0"
  debug: false

# Database Configuration
db:
  pool_size: 5
  max_overflow: 5

# API Configuration
api:
  top_k: 3  # Reduced to avoid 4000 TPM limit on dev keys.
  host: "0.0.0.0"
  port: 8000
  workers: 4
  cors_origins:
    - "http://localhost:3000"
    - "http://localhost:8000"

# Rate Limiting
rate_limits:
  requests_per_minute: 6000
  requests_per_hour: 100000
  queries_per_minute: 6000
  uploads_per_hour: 5000

# Upload Limits
uploads:
  max_size_mb: 100
  max_concurrent: 5
  allowed_extensions:
    - pdf
    - docx
    - doc
    - txt
    - md
    - html
    - pptx
    - xlsx

# Query Configuration
query:
  max_chunks: 10
  traversal_depth: 2
  similarity_threshold: 0.3
  include_trace: false

# Embedding Configuration
embeddings:
  provider: "ollama"
  model: "nomic-embed-text"
  dimensions: 768
  batch_size: 100

# LLM Configuration
llm:
  provider: "openai"
  model: "gpt-4.1-mini"
  temperature: 0.1
  max_tokens: 2048

# Community Detection
communities:
  algorithm: "leiden"
  min_community_size: 3
  resolution: 1.0

# Graph Sync Runtime
graph_sync:
  profile: "default" # Options: default, local_weak, cloud_strong
  profiles:
    default:
      initial_concurrency: 3
      max_concurrency: 5
      adaptive_concurrency_enabled: false
      use_gleaning: true
      max_gleaning_steps: 1
      cache_enabled: false
      cache_ttl_hours: 168
      smart_gleaning_enabled: false
      smart_gleaning_entity_threshold: 2
      smart_gleaning_relationship_threshold: 1
      smart_gleaning_min_chunk_chars: 250
    local_weak:
      initial_concurrency: 1
      max_concurrency: 2
      adaptive_concurrency_enabled: false
      use_gleaning: true
      max_gleaning_steps: 1
      cache_enabled: false
      cache_ttl_hours: 168
      smart_gleaning_enabled: false
      smart_gleaning_entity_threshold: 2
      smart_gleaning_relationship_threshold: 1
      smart_gleaning_min_chunk_chars: 250
    cloud_strong:
      initial_concurrency: 3
      max_concurrency: 5
      adaptive_concurrency_enabled: false
      use_gleaning: true
      max_gleaning_steps: 1
      cache_enabled: false
      cache_ttl_hours: 168
      smart_gleaning_enabled: false
      smart_gleaning_entity_threshold: 2
      smart_gleaning_relationship_threshold: 1
      smart_gleaning_min_chunk_chars: 250

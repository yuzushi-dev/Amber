# =============================================================================
# Amber - Hybrid GraphRAG System - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values.
# Never commit .env to version control.
# =============================================================================

# -----------------------------------------------------------------------------
# API Server Configuration
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
DEBUG=false

# Secret key for API key hashing (generate with: openssl rand -hex 32)
SECRET_KEY=your-secret-key-here

# Development API Key (Global Admin) - change in production!
DEV_API_KEY=amber-dev-key-2024

# Default tenant for single-tenant mode
TENANT_ID=default

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL - Metadata storage
DATABASE_URL=postgresql+asyncpg://graphrag:graphrag@postgres:5432/graphrag
POSTGRES_USER=graphrag
POSTGRES_PASSWORD=graphrag
POSTGRES_DB=graphrag

# Neo4j - Graph database
NEO4J_URI=bolt://neo4j:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your-neo4j-password

# Milvus - Vector database
MILVUS_HOST=milvus
MILVUS_PORT=19530

# Redis - Cache and message broker
REDIS_URL=redis://redis:6379/0
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2

# -----------------------------------------------------------------------------
# LLM Provider API Keys
# -----------------------------------------------------------------------------
# At least one LLM provider is required for generation
OPENAI_API_KEY=sk-your-openai-api-key
ANTHROPIC_API_KEY=
GOOGLE_API_KEY=
MISTRAL_API_KEY=
DEEPSEEK_API_KEY=

# Default LLM provider and model
# Options: openai, anthropic, ollama
DEFAULT_LLM_PROVIDER=openai
DEFAULT_LLM_MODEL=gpt-4o-mini

# -----------------------------------------------------------------------------
# Ollama Configuration (for local LLM/embeddings)
# -----------------------------------------------------------------------------
# For local development, use localhost. For Docker, use host.docker.internal
OLLAMA_BASE_URL=http://localhost:11434/v1
OLLAMA_MODEL=llama3.2

# -----------------------------------------------------------------------------
# Embedding Provider Configuration
# -----------------------------------------------------------------------------
# Options: openai, ollama, local

# For OpenAI (cloud, high quality):
DEFAULT_EMBEDDING_PROVIDER=openai
DEFAULT_EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# For Ollama (local, privacy-preserving):
# DEFAULT_EMBEDDING_PROVIDER=ollama
# DEFAULT_EMBEDDING_MODEL=nomic-embed-text
# EMBEDDING_DIMENSIONS=768
# Other Ollama models: mxbai-embed-large (1024d), all-minilm (384d)

# For sentence-transformers local:
# DEFAULT_EMBEDDING_PROVIDER=local
# DEFAULT_EMBEDDING_MODEL=BAAI/bge-m3
# EMBEDDING_DIMENSIONS=1024

# Voyage AI (optional - higher quality)
VOYAGE_API_KEY=

# Cohere (optional - multilingual)
COHERE_API_KEY=

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_REQUESTS_PER_HOUR=1000
RATE_LIMIT_QUERIES_PER_MINUTE=20
RATE_LIMIT_UPLOADS_PER_HOUR=50

# -----------------------------------------------------------------------------
# Upload Limits
# -----------------------------------------------------------------------------
MAX_UPLOAD_SIZE_MB=100
MAX_CONCURRENT_INGESTIONS=5

# -----------------------------------------------------------------------------
# Object Storage Configuration (SeaweedFS/MinIO S3-compatible)
# Preferred variables for new deployments:
# OBJECT_STORAGE_HOST=seaweed-s3
# OBJECT_STORAGE_PORT=8333
# OBJECT_STORAGE_ACCESS_KEY=...
# OBJECT_STORAGE_SECRET_KEY=...
# OBJECT_STORAGE_SECURE=false
# OBJECT_STORAGE_BUCKET_NAME=documents
# Legacy MINIO_* variables remain supported as fallbacks.
# -----------------------------------------------------------------------------
OBJECT_STORAGE_HOST=minio
OBJECT_STORAGE_PORT=9000
OBJECT_STORAGE_ACCESS_KEY=minioadmin
OBJECT_STORAGE_SECRET_KEY=minioadmin
OBJECT_STORAGE_SECURE=false
OBJECT_STORAGE_BUCKET_NAME=documents

# -----------------------------------------------------------------------------
# MinIO Configuration (legacy compatibility aliases)
# -----------------------------------------------------------------------------
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_HOST=minio
MINIO_PORT=9000
MINIO_SECURE=false
MINIO_BUCKET_NAME=documents
